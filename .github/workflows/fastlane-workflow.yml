name: "Fastlane"

on:
  push

jobs:
  test:
    name: "${{ matrix.env.name }}"
    runs-on: macos-latest
    strategy:
      fail-fast: false
      matrix:
        env:
          - name: "Test edX LTR"
            scheme: "edX"
          # - name: "Test edX RTL"
          #   scheme: "edX-RTL"
    steps:
      # - uses: actions/checkout@v2
      - name: Checkout
        run: |
          if ! [[ -z "$EDX_DEPLOYMENT_GH_TOKEN" ]]; then 
            echo ::set-output has_token=true
          else
            echo ::set-output has_token=false
          fi
        uses: actions/checkout@v2
        with:
          repository: edx/edx-mobile-config
          ref: master
          token: ${{ secrets.EDX_DEPLOYMENT_GH_TOKEN }}
      #- run: fastlane test scheme:${{ matrix.env.scheme }}